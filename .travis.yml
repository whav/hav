dist: xenial
sudo: required

language: python
python: "3.7"

install:
  - sudo pip install docker-compose

env:
  - DOCKER_COMPOSE_VERSION=1.23.2

script:
  - mkdir -p dist/incoming dist/archive dist/webassets
  - UG_IDS=`id -u`:`id -g` sed s/1000:1000/$UG_IDS/g <./env_files/docker.env >.env
  - cat .env
  - docker-compose config
  - docker-compose run django python manage.py test
